<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <title>Comment Déployer Jekyll</title>
        <meta name="viewport" content="width=device-width">

        <!-- mise en valeur syntaxe CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- CSS personnalisee -->
        <link rel="stylesheet" href="/css/main.css">
        
        <!-- OpenID - delegation IndieAuth --> 
       	<link rel="openid.server" href="https://indieauth.com/openid"/>
		<link rel="openid.delegate" href="http://christopheducamp.com/"/>

		<!-- indieauth sms + e-mail google -->
		<link href="sms:+33632039796" rel="me">
		<link class="u-email" href="mailto:christophe.ducamp@gmail.com" rel="me">


       <link rel="shortcut icon" href="/logo.jpg" />
         <meta name="mobile-web-app-capable" content="yes" />
         <link rel="apple-touch-icon-precomposed" href="/logo.jpg" />

       <!-- webmention.herokuapp.com -->
       <link rel="webmention" href="https://webmention.herokuapp.com/api/webmention" />


    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">Je reprends la route...</a></h1>
            <a class="extra" href="/">accueil</a>
          </div>

          <article class="h-entry">
<h2 class="p-name">Comment Déployer Jekyll</h2>
<!-- #todo indiewebify - ajouter url permaliens et catégories --> 

<div class="e-content post">
<p><a href="http://jekyllrb.com/docs/deployment-methods/">lien de référence (doc Jekyll)</a></p>

<p>Du fait de la nature statique de la production générée, tous les sites construits avec Jekyll peuvent être déployés de différentes façons. Quelques-unes des techniques les plus communes sont décrites ci-dessous.</p>

<h2>Fournisseurs d&#39;hébergement web (FTP)</h2>

<p>Quasiment tous les <a href="http://indiewebcamp.com/web_hosting">fournisseurs d&#39;hébergement web</a> traditionnels vous permettent de copier des fichiers sur leurs serveurs par FTP. Pour téléverser un site Jekyll sur un hébergeur web en utilisant FTP, lancez simplement la commande <code>jekyll</code> et copiez le répertoire <code>_site</code> généré sur le répertoire racine de votre compte hébergé. Pour la plupart des fournisseurs d&#39;hébergement, ceci se fait généralement sur les répertoires <code>httpdocs</code> ou <code>public_html</code>.</p>

<h3><span id="glynn">FTP en utilisant Glynn</span></h3>

<p>Il existe un projet appelé <a href="https://github.com/dmathieu/glynn">Glynn</a>, qui vous permet de générer facilement vos fichiers statiques du site web motorisé par Jekyll et de les envoyer à votre hébergeur par FTP.</p>

<p>Par exemple, le fichier <code>_config.yml</code> de cette instance hébergée chez OVH se présente comme suit : </p>

<div class="highlight"><pre><code class="yaml"><span class="l-Scalar-Plain">ftp_host</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">ftp.christopheducamp.com</span>
<span class="l-Scalar-Plain">ftp_username</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">monnomutilisateur</span>
<span class="l-Scalar-Plain">ftp_dir</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/www</span>
<span class="l-Scalar-Plain">ftp_passive</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
</code></pre></div>

<p>Pour générer le site et le déployer, il me suffit alors de reprendre la ligne de commande, de me placer à la racine du projet puis de taper la commande :</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>glynn
</code></pre></div>

<p>(C&#39;est la solution que j&#39;ai retenue pour le moment : une ligne de commande puis un mot de passe, et tout le site est régénéré et mis en ligne !)</p>

<h2>Serveur web auto-géré</h2>

<p>Si vous avez un accès direct au serveur de déploiement, le processus est en fait le même, si ce n&#39;est que vous pourriez disposer d&#39;autres méthodes vous étant réservées<br>
(comme des accès <code>scp</code>, ou même un accès direct au système de fichiers). Souvenez-vous simplement de vous assurer que les contenus du répertoire <code>_site</code> généré soient placés dans le bon répertoire web racine de votre serveur web.</p>

<h2>Méthodes automatisées</h2>

<p>Il existe aussi un certain nombre de moyens pour automatiser facilement le déploiement d&#39;un site Jekyll. Si vous avez une autre méthode non listée ci-dessous, nous adorerions l&#39;ajouter si vous <a href="../contributing/">y avez contribué</a> afin que tous les autres puissent aussi en profiter.</p>

<h3>Git post-update hook</h3>

<p>Si vous stockez votre site jekyll dans <a href="http://git-scm.com/">Git</a> (vous utilisez un contrôle de version, non ?), il est vraiment facile d&#39;automatiser le processus de déploiement en réglant un hook de mise-à-jour-post dans votre dépôt Git, <a href="http://web.archive.org/web/20091223025644/http://www.taknado.com/en/2009/03/26/deploying-a-jekyll-generated-site/">comme ceci</a>.</p>

<h3>Git post-receive hook</h3>

<p>Pour faire qu&#39;un serveur distant gère le déploiement pour vous à chaque fois que vous poussez des modifications en utilisant Git, vous pouvez créer un compte utilisateur qui dispose de toutes les clés publiques qui sont autorisées pour déployer dans son fichier <code>authorized_keys</code>.  Une fois cela mis en place, régler le hook post-receive se fait comme suit : </p>

<div class="highlight"><pre><code class="bash">laptop<span class="nv">$ </span>ssh deployer@example.com
server<span class="nv">$ </span>mkdir monrepo.git
server<span class="nv">$ </span><span class="nb">cd </span>monrepo.git
server<span class="nv">$ </span>git --bare init
server<span class="nv">$ </span>cp hooks/post-receive.sample hooks/post-receive
server<span class="nv">$ </span>mkdir /var/www/monrepo
</code></pre></div>

<p>Ensuite ajoutez les lignes suivantes aux hooks/post-receive et assurez-vous que Jekyll soit installé sur le serveur :</p>

<div class="highlight"><pre><code class="bash"><span class="nv">GIT_REPO</span><span class="o">=</span><span class="nv">$HOME</span>/monrepo.git
<span class="nv">TMP_GIT_CLONE</span><span class="o">=</span><span class="nv">$HOME</span>/tmp/monrepo
<span class="nv">PUBLIC_WWW</span><span class="o">=</span>/var/www/monrepo

git clone <span class="nv">$GIT_REPO</span> <span class="nv">$TMP_GIT_CLONE</span>
jekyll build -s <span class="nv">$TMP_GIT_CLONE</span> -d <span class="nv">$PUBLIC_WWW</span>
rm -Rf <span class="nv">$TMP_GIT_CLONE</span>
<span class="nb">exit</span>
</code></pre></div>

<p>Pour finir, faites tourner la commande suivante sur n&#39;importe quel ordinateur d&#39;utilisateur ayant de déployer en utilisant ce hook : </p>

<div class="highlight"><pre><code class="bash">laptops<span class="nv">$ </span>git remote add deploy deployer@exemple.com:~/monrepo.git
</code></pre></div>

<p>Déployer est maintenant aussi facile que de dire à nginx ou Apache de regarder 
<code>/var/www/monrepo</code> et de faire tourner ce qui suit : </p>

<div class="highlight"><pre><code class="bash">laptops<span class="nv">$ </span>git push deploy master
</code></pre></div>

<h3>Rake</h3>

<p>Un autre moyen de déployer votre site Jekyll est d&#39;utiliser <a href="https://github.com/jimweirich/rake">Rake</a>, <a href="https://github.com/JEG2/highline">HighLine</a>, et <a href="http://net-ssh.rubyforge.org/">Net::SSH</a>. Un exemple plus complexe de déploiement Jekyll avec Rake qui gère plusieurs branches peut être trouvé dans <a href="https://github.com/gitready/gitready/blob/cdfbc4ec5321ff8d18c3ce936e9c749dbbc4f190/Rakefile">Git Ready</a>.</p>

<h3>rsync</h3>

<p>Une fois que vous avez généré le répertoire <code>_site</code>, vous pouvez facilement le rsync en utilisant un script shell <code>tasks/deploy</code> similaire à ce 
<a href="http://github.com/henrik/henrik.nyh.se/blob/master/tasks/deploy">script de déploiement ici</a>. 
Vous devriez bien évidemment changer les valeurs pour refléter les détails de votre site. 
Il existe même une <a href="http://gist.github.com/214959">commande correspondante TextMate</a> qui vous aidera à faire tourner ce script à partir de Textmate.</p>

<h2>Rack-Jekyll</h2>

<p><a href="http://github.com/bry4n/rack-jekyll/">Rack-Jekyll</a> est un moyen facile de déployer votre site sur tout serveur Rack tel que Amazon EC2, Slicehost, Heroku et ainsi de suite. 
Il peut aussi tourner avec <a href="http://github.com/rtomakyo/shotgun/">shotgun</a>, <a href="http://github.com/rack/rack">rackup</a>, <a href="http://github.com/mongrel/mongrel">mongrel</a>, <a href="http://github.com/defunkt/unicorn/">unicorn</a>, et d&#39;<a href="https://github.com/adaoraul/rack-jekyll#readme">autres</a>.</p>

<p>Lisez <a href="http://blog.crowdint.com/2010/08/02/instant-blog-using-jekyll-and-heroku.html">ce post</a> pour savoir comment déployer sur Heroku en utilisant Rack-Jekyll.</p>

<h2>Jekyll-Admin pour Rails</h2>

<p>Si vous voulez maintenir Jekyll dans votre app existante Rails, <a href="http://github.com/zkarpinski/Jekyll-Admin">Jekyll-Admin</a> contient un code à lâcher pour rendre ça possible. 
Regardez la page <a href="http://github.com/zkarpinski/Jekyll-Admin/blob/master/README">README</a> de Jekyll-Admin pour plus de détails.</p>

<h2>Amazon S3</h2>

<p>Si vous voulez héberger votre site sur Amazon S3, vous pouvez faire ainsi avec l&#39;application 
<a href="https://github.com/laurilehmijoki/s3_website">s3_website</a>. Elle poussera votre site vers Amazon S3 où il peut être servi comme n&#39;importe quel serveur web, pouvant dynamiquement passer à l&#39;échelle pour du trafic presque illimité. Cette approche a l&#39;avantage d&#39;être parmi l&#39;option d&#39;hébergement la plus économique pour des blogs de gros volume, car vous ne payez que pour ce que vous utilisez.</p>

<h2>OpenShift</h2>

<p>Si vous souhaitez déployer votre site sur OpenShift, il y a <a href="https://github.com/openshift-cartridges/openshift-jekyll-cartridge">une cartouche pour cela</a>.</p>

<h2>ProTruc : Pour un hébergement Jekyll zéro-tracas, utilisez les Pages GitHub</h2>

<p>Les Pages GitHub sont motorisées en coulisses par Jekyll, par conséquent si vous cherchez un hébergement zéro-tracas, une solution à coût zéro, les Pages GitHub sont un moyen génial pour <a href="http://pages.github.com/">héberger gratuitement votre site web-motorisé-par-Jekyll</a>.</p>

</div>




<footer>
<span  class="p-category entry-tags"><a href="/tags/index.html#déploiement" title="Pages taguées déploiement" rel="tag" class="tag">déploiement</a> <a href="/tags/index.html#jekyll" title="Pages taguées jekyll" rel="tag" class="tag">jekyll</a> <a href="/tags/index.html#FTP" title="Pages taguées FTP" rel="tag" class="tag">FTP</a> <a href="/tags/index.html#glynn" title="Pages taguées glynn" rel="tag" class="tag">glynn</a> </span>
<p class="meta"><time class="dt-published" datetime="2014-01-12T08:30:00+01:00">
  Dimanche 12 janvier 2014
</time> - <a rel="author" class="p-author h-card microcard" href="http://christopheducamp.com" title="Christophe Ducamp"><img class="u-photo" src='/logo.jpg' alt="Christophe Ducamp" /> Christophe Ducamp</a>
- <a class="u-url" href="/2014/01/12/deploiement-Jekyll/">permalien</a></p>
</footer>
</article>

<div>
  Vous avez écrit une réponse à ce post ? Faites-moi connaître l'URL :
  <form action="https://webmention.herokuapp.com/api/webmention" method="post">
    <input name="source" type="url" placeholder="http://exemple.com/mon-post-cool" />
    <input name="target" value="http://christopheducamp.com/2014/01/12/deploiement-Jekyll/" type="hidden">
    <input value="Envoyer la Webmention" type="submit">
  </form>
</div>

<section class="webmention">
<script id="webmention-hosted">
  (function () {
    var sn = document.createElement("script"), s = document.getElementsByTagName("script")[0], url;
    url = document.querySelectorAll ? document.querySelectorAll("link[rel~=canonical]") : false;
    url = url && url[0] ? url[0].href : false;
    sn.type = "text/javascript"; sn.async = true;
    sn.src = "//webmention.herokuapp.com/api/embed?url=" + encodeURIComponent(url || window.location);
    s.parentNode.insertBefore(sn, s);
  }());
</script>
</section>




          <div class="footer">
            <div class="contact">
              <p class="h-card">
                <span class="microcard"><img class="u-photo" src="/logo.jpg" alt="photo de @mikiane" /><a class="u-url" rel="me" href="http://christopheducamp.com">Christophe Ducamp</a></span><br />
                <span class="p-note">Explorateur Indieweb</span><br />
                <a rel="me" class="u-email" href="mailto:christophe@mydatalabs.com">christophe@mydatalabs.com</a>
              </p>
            </div>
            <div class="contact">
              <p>
                <a rel="me" href="https://github.com/ChristopheDucamp">github.com/ChristopheDucamp</a><br />
                <a rel="me" href="https://twitter.com/xtof_fr">twitter.com/xtof_fr</a><br />
              </p>
            </div>
          </div>
        </div>

    </body>
</html>
